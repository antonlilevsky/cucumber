/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
    id "io.freefair.lombok" version "5.3.0"
    id 'io.qameta.allure' version "2.5"

}
apply plugin: 'io.qameta.allure'
allure {
    version = '2.5'
    autoconfigure = true
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
    jcenter()
}

dependencies {
    testImplementation 'io.cucumber:cucumber-java:6.8.1'
    testImplementation 'io.cucumber:cucumber-junit:6.8.1'
    implementation 'junit:junit:4.13'
    implementation group: 'io.github.bonigarcia', name: 'webdrivermanager', version: '4.3.1'
    implementation group: 'com.codeborne', name: 'selenide', version: '5.18.1'
    implementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '3.141.59'
    implementation group: 'org.seleniumhq.selenium', name: 'selenium-chrome-driver', version: '3.141.59'
    implementation group: 'org.seleniumhq.selenium', name: 'selenium-firefox-driver', version: '3.141.59'
    implementation group: 'org.seleniumhq.selenium', name: 'selenium-api', version: '3.141.59'
    implementation("org.assertj:assertj-core:3.11.1")
    implementation group: 'io.vavr', name: 'vavr', version: '0.9.0'
    implementation group: 'io.qameta.allure', name: 'allure-gradle', version: '2.5'
    implementation group: 'io.qameta.allure', name: 'allure-selenide', version: '2.13.8'

}

group = 'cucumber'
version = '1.0.0-SNAPSHOT'
description = 'cucumber'
java.sourceCompatibility = JavaVersion.VERSION_1_8

//publishing {
//    publications {
//        maven(MavenPublication) {
//            from(components.java)
//        }
//    }
//}
configurations {
    cucumberRuntime {
        extendsFrom testImplementation
    }
}
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}
task cucumber() {
    dependsOn assemble, testClasses
    doLast {
        javaexec {
            main = "io.cucumber.core.cli.Main"
            classpath = configurations.cucumberRuntime + sourceSets.main.output + sourceSets.test.output
            args = ['--plugin', 'pretty', \
//                    '--plugin', 'io.qameta.allure.cucumber5jvm.AllureCucumber5Jvm', \
                    '--glue', 'steps', 'src/test/resources/features' ]
        }
    }
}
sourceSets {
    main {
        resources {
            srcDirs "src/main/resources"
        }
    }
}
